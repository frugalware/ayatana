# Compiling Time: 3.34 SBU
# Maintainer: Melko <melko@frugalware.org>

pkgname=openclonk
pkgver=5.1.2
pkgrel=1
pkgdesc="Free multiplayer action game where you control clonks, small but witty and nimble humanoid beings."
url="http://www.openclonk.org/"
depends=('openssl' 'glew' 'gtk+2-libs' 'gdk-pixbuf2' 'libxpm' 'sdl_mixer')
makedepends=('boost' 'gtk+2')
groups=('games-extra')
archs=('i686' 'x86_64')
_F_archive_name=$pkgname-release
Finclude cmake
up2date="Flastarchive http://hg.openclonk.org/openclonk/archive/ '-src.tar.gz'"
source=(http://hg.openclonk.org/openclonk/archive/$pkgname-release-$pkgver-src.tar.gz
	$pkgname.desktop $pkgname.png)
sha1sums=('c29649d3cba907bc88079d019d1d4c9aadd60255' \
          '7620d369573b685d06588fe5750d1e7f7bf85bda' \
          '36bc26a08fecbe6dd75bcc541c879a69ff31fd95')

build() {
	Fcd $pkgname-release-$pkgver-src
	CMake_make
	Fmkdir usr/share/games/$pkgname
	Fcprel ../planet usr/share/games/$pkgname
	Fexerel clonk usr/share/games/$pkgname/planet/clonk
	Ffile $pkgname.desktop usr/share/applications/$pkgname.desktop
	Ficon $pkgname.png
	Fwrapper "/usr/share/games/$pkgname/planet/clonk" $pkgname
}

# optimization OK
