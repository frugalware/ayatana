--- libproxy-0.4.7/libproxy/cmake/modules/pacrunner_mozjs.cmk.old	2011-06-06 23:44:37.000000000 +0200
+++ libproxy-0.4.7/libproxy/cmake/modules/pacrunner_mozjs.cmk	2011-07-05 11:52:10.000000000 +0200
@@ -7,20 +7,17 @@
     include_directories("${MOZJS_INCLUDE_DIR}")
   endif()
 elseif(NOT APPLE)
-  set(MOZJS_SEARCH_ORDER "mozilla-js;xulrunner-js;firefox-js;seamonkey-js" CACHE STRING "MozJS search order")
   option(WITH_MOZJS "Search for MOZJS package" ON)
   if (WITH_MOZJS)
-    foreach(MOZJSLIB ${MOZJS_SEARCH_ORDER})
-      pkg_search_module(MOZJS ${MOZJSLIB}>=2.0b12)
-      if(MOZJS_FOUND)
-        include_directories(${MOZJS_INCLUDE_DIRS})
-        link_directories(${MOZJS_LIBRARY_DIRS})
-        break()
-      else()
-        set(MOZJS_FOUND 0)
-      endif()
-    endforeach()
+    pkg_search_module(MOZJS mozjs185>=1.8.5)
+    if(MOZJS_FOUND)
+      include_directories(${MOZJS_INCLUDE_DIRS})
+      link_directories(${MOZJS_LIBRARY_DIRS})
+    else()
+      set(MOZJS_FOUND 0)
+    endif()
   else()
     set(MOZJS_FOUND 0)
   endif()
 endif()
+
