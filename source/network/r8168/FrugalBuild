# Compiling Time: 0.01 SBU
# Contributor: Daniel Exner <dex@dragonslave.de>
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=r8168
pkgver=8.024.00
pkgrel=5
Finclude kernel-module
pkgdesc="Realtek driver for RTL8111/RTL8168 cards."
url="http://www.realtek.com.tw"
groups=('network')
archs=('i686' 'x86_64')
up2date="Flasttar http://code.google.com/p/arcon/downloads/list"
source=(http://arcon.googlecode.com/files/${pkgname}-${pkgver}.tar.bz2)
sha1sums=('0a5f7611356a70c168cb683319d76d6cec64b0be')

build() {
	unset MAKEFLAGS
	#Fcheckkernel
	Fmkdir $_F_kernelmod_dir/kernel/drivers/net
	Fbuild_kernelmod_scriptlet
	Fsed '$(shell uname -r)' "${_F_kernelmod_uname}" src/Makefile
	Fsed '^KEXT.*:=.*$' 'KEXT := ko' src/Makefile
	Fsed '^KMISC.*:=.*$' "KMISC := $Fdestdir/lib/modules/\$(KVER)/kernel/drivers/net" src/Makefile
	Fbuild
}
