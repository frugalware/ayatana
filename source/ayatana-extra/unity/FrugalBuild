# Compiling Time: 0.33 SBU
# Maintainer: Devil505 <devil505linux@gmail.com>

pkgname=unity
pkgver=4.0.1
pkgrel=2
pkgdesc="A desktop experience designed for efficiency of space and interaction"
url="https://launchpad.net/unity/"
depends=('compiz-gnome>=0.9.4-2' 'nux>=1.0.1' 'bamf>=0.2.92' 'libdee>=0.5.16' \
        'libdbusmenu>=0.4.90' 'libindicator' 'libunity-misc' \
        'unity-asset-pool' 'compizconfig-backend-gconf' 'utouch-geis')
makedepends=('vala' 'intltool' 'gobject-introspection' 'boost')
groups=('ayatana-extra')
_F_cmake_confopts="-DCMAKE_BUILD_TYPE=Release -DCOMPIZ_PLUGIN_INSTALL_TYPE=package"
_F_gnome_glib="y"
_F_gnome_schemas=('/etc/gconf/schemas/compiz-unitymtgrabhandles.schemas')
_F_launchpad_ext=".tar.bz2"
_F_launchpad_branch="4.0"
Finclude cmake gnome-scriptlet launchpad
archs=('i686' 'x86_64')
source=($source frugalware-icon.png $pkgname.desktop $pkgname.session)
sha1sums=('4bc6109443b4cf3c2599983e0abe4dfcb3dade7a' \
          '74be0bbad4cda0b411fb4f8e62c5fa401535aa8b' \
          '87515570912a71e38708e5ec1df2227fcf30128a' \
          '7527affeb3bcc0d815ea0fd18b86e235a3ab60df')

build() {
    CMake_build

    Fmkdir /etc/gconf/schemas/
    Fmv usr/share/gconf/schemas/compiz-unitymtgrabhandles.schemas etc/gconf/schemas/compiz-unitymtgrabhandles.schemas
    Frm usr/share/gconf/
    Fbuild_gnome_scriptlet
    Frm /var

    # replacing ubuntu icon by frugalware icon :)
    Frm usr/share/unity/3/bfb.png
    Ffile frugalware-icon.png usr/share/unity/3/bfb.png

    # session entries
    Fmkdir usr/share/{xsessions,gnome-session/sessions}
    Ffile $pkgname.desktop usr/share/xsessions/$pkgname.desktop
    Ffile $pkgname.session usr/share/gnome-session/sessions/$pkgname.session
}


# optimization OK
